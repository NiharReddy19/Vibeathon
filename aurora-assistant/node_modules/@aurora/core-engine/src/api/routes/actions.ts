// File: packages/core-engine/src/api/routes/actions.ts
// Purpose: Action execution endpoint (MOCK for now)

import { Router } from 'express';
import { ActionRequest, ActionResult } from '@aurora/shared';
import { logger } from '../../utils/logger';

const router = Router();

// POST /v1/actions/run - Execute an action
router.post('/run', (req, res) => {
  const actionRequest: ActionRequest = req.body;

  if (!actionRequest.action) {
    return res.status(400).json({
      ok: false,
      error: 'Missing "action" field in request body',
    });
  }

  logger.info(`Running action: ${actionRequest.action}`, { params: actionRequest.params });

  // MOCK: Return success (Part C will implement real actions)
  const mockResult: ActionResult = {
    ok: true,
    data: { message: `Action "${actionRequest.action}" executed successfully (MOCK)` },
    logs: [`[MOCK] Action ${actionRequest.action} called with params: ${JSON.stringify(actionRequest.params)}`],
  };

  res.json({
    ok: true,
    data: mockResult,
  });
});

export default router;
