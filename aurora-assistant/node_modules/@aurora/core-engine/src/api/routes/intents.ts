// File: packages/core-engine/src/api/routes/intents.ts
// Purpose: Intent parsing endpoint (MOCK for now)

import { Router } from 'express';
import { IntentDecision } from '@aurora/shared';
import { logger } from '../../utils/logger';

const router = Router();

// POST /v1/intents/parse - Parse text into intent
router.post('/parse', (req, res) => {
  const { text } = req.body;

  if (!text || typeof text !== 'string') {
    return res.status(400).json({
      ok: false,
      error: 'Missing or invalid "text" field in request body',
    });
  }

  logger.info(`Parsing intent for text: "${text}"`);

  // MOCK: Return a dummy intent (Part C will implement real NLU)
  const mockIntent: IntentDecision = {
    intent: 'open_app',
    confidence: 0.85,
    slots: { app_name: 'vscode' },
    rawText: text,
  };

  res.json({
    ok: true,
    data: mockIntent,
  });
});

export default router;
