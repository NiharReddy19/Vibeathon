import { Recipe } from '@aurora/shared';

interface RecipeCardProps {
  recipe: Recipe;
  onRun: (id: string) => void;
  onDelete: (id: string) => void;
  disabled?: boolean;
}

export default function RecipeCard({ recipe, onRun, onDelete, disabled = false }: RecipeCardProps) {
  const btnDisabled = !!disabled;

  return (
    <div className="recipe-card">
      <div className="recipe-header">
        <h3>{recipe.name}</h3>
        <span className="recipe-actions-count">{recipe.actions.length} actions</span>
      </div>
      
      {recipe.description && (
        <p className="recipe-description">{recipe.description}</p>
      )}

      <div className="recipe-actions-list">
        {recipe.actions.slice(0, 3).map((action, idx) => (
          <div key={idx} className="action-item">
            <span className="action-name">{action.action}</span>
            <span className="action-params">
              {Object.entries(action.params).map(([k, v]) => `${k}: ${v}`).join(', ')}
            </span>
          </div>
        ))}
        {recipe.actions.length > 3 && (
          <div className="action-item more">
            +{recipe.actions.length - 3} more
          </div>
        )}
      </div>

      <div className="recipe-footer">
        <button onClick={() => onRun(recipe.id)} className="btn-primary btn-sm" disabled={btnDisabled}>
          Run
        </button>
        <button onClick={() => onDelete(recipe.id)} className="btn-danger btn-sm" disabled={btnDisabled}>
          Delete
        </button>
      </div>
    </div>
  );
}
